
    var data = {};

(function() {

data.parties = [
  {name: "democrat", speeches: [
    "BARACK OBAMA: Thank you. (Sustained cheers, applause.) Thank you. Thank you. Thank you so much.\nAUDIENCE MEMBERS: Four more years! Four more years! Four more years!\nBARACK OBAMA: Thank you.\nAUDIENCE MEMBERS: Four more years! Four more years! Four more years!\nBARACK OBAMA: Thank you so much. Thank you. Thank you very much, everybody. (Cheers, applause.) Thank you.\nMichelle, I love you so much. (Cheers, applause.)\nA few nights ago, everybody was reminded just what a lucky man I am. (Cheers, applause.)\nMalia and Sasha, we are so proud of you. (Cheers, applause.) And yes, you do have to go to school in the morning. (Chuckles.) (Laughter, applause.)\nAnd Joe Biden, thank you for being the very best vice president I could have ever hoped for â€” (cheers, applause) â€” and being a strong and loyal friend.\nMadam Chairwoman, delegates, I accept your nomination for president of the United States. (Cheers, applause.)\nAUDIENCE MEMBERS: (Chanting.) Four more years! Four more years! Four more years! Four more years!\nBARACK OBAMA: Now, the first time I addressed this convention, in 2004, I was a younger man â€” (laughter) â€” a Senate candidate from Illinois who spoke about hope, not blind optimism, not wishful thinking but hope in the face of difficulty, hope in the face of uncertainty, that dogged faith in the future which has pushed this nation forward even when the odds are great, even when the road is long.\nEight years later that hope has been tested by the cost of war, by one of the worst economic crises in history and by political gridlock that's left us wondering whether it's still even possible to tackle the challenges of our time. I know campaigns can seem small, even silly sometimes.\nTrivial things become big distractions. Serious issues become sound bites. The truth gets buried under an avalanche of money and advertising. And if you're sick of hearing me approve this message, believe me, so am I. (Laughter, cheers, applause.)\nBut when all is said and done, when you pick up that ballot to vote, you will face the clearest choice of any time in a generation. (Cheers.) Over the next few years big decisions will be made in Washington on jobs, the economy, taxes and deficits, energy, education, war and peace â€” decisions that will have a huge impact on our lives and on our children's lives for decades to come.\nAnd on every issue, the choice you face won't just be between two candidates or two parties. It will be a choice between two different paths for America, a choice between two fundamentally different visions for the future. Ours is a fight to restore the values that built the largest middle class and the strongest economy the world has ever known â€” (cheers, applause) â€” the values my grandfather defended as a soldier in Patton's army, the values that drove my grandmother to work on a bomber assembly line while he was gone. They knew they were part of something larger â€” a nation that triumphed over fascism and depression, a nation where the most innovative businesses turn out the world's best products, and everyone shared in that pride and success from the corner office to the factory floor.\nMy grandparents were given the chance to go to college and buy their home â€” their own home and fulfill the basic bargain at the heart of America's story, the promise that hard work will pay off, that responsibility will be rewarded, that everyone gets a fair shot and everyone does their fair share and everyone plays by the same rules, from Main Street to Wall Street to Washington, D.C. (Cheers, applause.)\nAnd I ran for president because I saw that basic bargain slipping away. I began my career helping people in the shadow of a shuttered steel mill at a time when too many good jobs were starting to move overseas. And by 2008 we had seen nearly a decade in which families struggled with costs that kept rising but paychecks that didn't, folks racking up more and more debt just to make the mortgage or pay tuition, put gas in the car or food on the table. And when the house of cards collapsed in the Great Recession, millions of innocent Americans lost their jobs, their homes, their life savings, a tragedy from which we're still fighting to recover.\nNow, our friends down in Tampa at the Republican convention were more than happy to talk about everything they think is wrong with America. But they didn't have much to say about how they'd make it right. (Cheers, applause.) They want your vote, but they don't want you to know their plan. And that's because all they have to offer is the same prescriptions they've had for the last 30 years. Have a surplus? Try a tax cut. Deficit too high â€” try another.\nFeel a cold coming on? Take two tax cuts, roll back some regulations, and call us in the morning. (Cheers, applause.)\nNow, I've cut taxes for those who need it â€” (cheers, applause) â€” middle-class families, small businesses. But I don't believe that another round of tax breaks for millionaires will bring good jobs to our shores, or pay down our deficit. I don't believe that firing teachers or kicking students off financial aid will grow the economy â€” (cheers, applause) â€” or help us compete with the scientists and engineers coming out of China. After all we've been through, I don't believe that rolling back regulations on Wall Street will help the small-businesswoman expand, or the laid-off construction worker keep his home.\nWe have been there, we've tried that, and we're not going back. We are moving forward, America. (Cheers, applause.)\nNow, I won't pretend the path I'm offering is quick or easy. I never have. You didn't elect me to tell you what you wanted to hear. You elected me to tell you the truth. (Cheers, applause.)\nAnd the truth is, it will take more than a few years for us to solve challenges that have built up over decades. It'll require common effort, shared responsibility, and the kind of bold, persistent experimentation that Franklin Roosevelt pursued during the only crisis worse than this one. (Cheers, applause.)\nAnd by the way, those of us who carry on his party's legacy should remember that not every problem can be remedied with another government program or dictate from Washington.\nBut know this, America: Our problems can be solved. (Cheers, applause.) Our challenges can be met. (Applause.) The path we offer may be harder, but it leads to a better place, and I'm asking you to choose that future. (Applause.)\nI'm asking you to rally around a set of goals for your country, goals in manufacturing, energy, education, national security and the deficit, real, achievable plans that will lead to new jobs, more opportunity and rebuild this economy on a stronger foundation. That's what we can do in the next four years, and that is why I am running for a second term as president of the United States. (Cheers, applause.)\nWe can choose a future where we export more products and outsource fewer jobs. After a decade that was defined by what we bought and borrowed, we're getting back to basics and doing what America's always done best. We are making things again. (Applause.) I've met workers in Detroit and Toledo who feared â€” (cheers, applause) â€” they'd never build another American car. And today they can't build them fast enough because we reinvented a dying auto industry that's back on the top of the world. (Cheers, applause.) I worked with business leaders who are bringing jobs back to America not because our workers make less pay, but because we make better products â€” (cheers) â€” because we work harder and smarter than anyone else.\n(Cheers, applause.) I've signed trade agreements that are helping our companies sell more goods to millions of new customers, goods that are stamped with three proud words: \"Made in America.\" (Cheers, applause.)\nAUDIENCE MEMBERS: (Chanting.) USA! USA! USA! USA! USA! USA! USA! USA! USA! USA! USA! USA!\nBARACK OBAMA: And after a decade of decline, this country created over half a million manufacturing jobs in the last 2 1/2 years. (Cheers.) And now you have a choice. We can give more tax breaks to corporations that shift jobs overseas â€”\nAUDIENCE MEMBER: No!\nBARACK OBAMA: â€” or we can start rewarding companies that open new plants and train new workers and create new jobs here in the United States of America. (Cheers, applause.) We can help big factories and small businesses double their exports. And if we choose this path, we can create a million new manufacturing jobs in the next four years. You can make that happen. (Cheers, applause.) You can choose that future.\nYou can choose the path where we control more of our own energy. After 30 years of inaction, we raised fuel standards so that by the middle of the next decade, cars and trucks will go twice as far on a gallon of gas. (Cheers, applause.) We have doubled our use of renewable energy, and thousands of Americans have jobs today building wind turbines and long-lasting batteries. (Cheers, applause.) In the last year alone, we cut oil imports by 1 million barrels a day, more than any administration in recent history. (Cheers, applause.) And today the United States of America is less dependent on foreign oil than at any time in the last two decades. (Cheers, applause.)\nSo now you have a choice between a strategy that reverses this progress or one that builds on it.\nWe've opened millions of new acres for oil and gas exploration in the last three years, and we'll open more. But unlike my opponent, I will not let oil companies write this country's energy plan or endanger our coastlines or collect another $4 billion in corporate welfare from our taxpayers. (Cheers, applause.) We're offering a better path.\nWe're offering a better path where we â€” a future where we keep investing in wind and solar and clean coal, where farmers and scientists harness new biofuels to power our cars and trucks, where construction workers build homes and factories that waste less energy, where â€” where we develop a hundred-year supply of natural gas that's right beneath our feet. If you choose this path, we can cut our oil imports in half by 2020 and support more than 600,000 new jobs in natural gas alone. (Cheers, applause.\nAnd yes, my plan will continue to reduce the carbon pollution that is heating our planet, because climate change is not a hoax. More droughts and floods and wildfires are not a joke. (Cheers, applause.) They are a threat to our children's future.\nAnd in this election, you can do something about it. (Cheers, applause.) You can choose a future where more Americans have the chance to gain the skills they need to compete, no matter how old they are or how much money they have.\nEducation was the gateway to opportunity for me. (Cheers.) It was the gateway for Michelle. It was â€” it was the gateway for most of you. And now more than ever it is the gateway to a middle-class life.\nFor the first time in a generation, nearly every state has answered our call to raise their standards for teaching and learning. (Cheers, applause.) Some of the worst schools in the country have made real gains in math and reading. Millions of students are paying less for college today because we finally took on a system that wasted billions of taxpayer dollars on banks and lenders. (Cheers, applause.)\nAnd now you have a choice. We can gut education, or we can decide that in the United States of America, no child should have her dreams deferred because of a crowded classroom or a crumbling school. No family should have to set aside a college acceptance letter because they don't have the money. (Cheers, applause.) No company should have to look for workers overseas because they couldn't find any with the right skills here at home. (Cheers, applause.) That's not our future. That is not our future. (Cheers, applause.)\nA government has a role in this. But teachers must inspire. Principals must lead. Parents must instill a thirst for learning. And students, you've got to do the work. (Cheers, applause.) And together, I promise you we can outeducate and outcompete any nation on earth. (Cheers, applause.)\nSo help me. Help me recruit a hundred thousand math and science teachers within 10 years and improve early childhood education. (Cheers, applause.) Help give 2 million workers the chance to learn skills at their community college that will lead directly to a job. Help us work with colleges and universities to cut in half the growth of tuition costs over the next 10 years.\nWe can meet that goal together. (Cheers, applause.) You can choose that future for America. (Cheers, applause.) That's our future.\nYou know, in a world of new threats and new challenges, you can choose leadership that has been tested and proven. Four years ago I promised to end the war in Iraq. We did. (Cheers, applause.) I promised to refocus on the terrorists who actually attacked us on 9/11, and we have. (Cheers, applause.) We've blunted the Taliban's momentum in Afghanistan and in 2014, our longest war will be over. (Cheers, applause.) A new tower rises above the New York skyline, al- Qaida is on the path to defeat and Osama bin Laden is dead. (Cheers, applause.)\nAnd tonight we pay tribute to the Americans who still serve in harm's way. We are forever in debt to a generation whose sacrifice has made this country safer and more respected. We will never forget you, and so long as I'm commander in chief, we will sustain the strongest military the world has ever known. (Cheers, applause.) When you take off the uniform, we will serve you as well as you've served us, because no one who fights for this country should have to fight for a job or a roof over their head or the care that they need when they come home.\n(Cheers, applause.)\nAround the world, we've strengthened old alliances and forged new coalitions to stop the spread of nuclear weapons. We've reasserted our power across the Pacific and stood up to China on behalf of our workers. From Burma to Libya to South Sudan, we have advanced the rights and dignity of all human beings â€” (cheers) â€” men and women; Christians and Muslims and Jews. (Cheers, applause.)\nBut for all the progress that we've made, challenges remain. Terrorist plots must be disrupted. Europe's crisis must be contained. Our commitment to Israel's security must not waver, and neither must our pursuit of peace. (Cheers, applause.) The Iranian government must face a world that stays united against its nuclear ambitions. The historic change sweeping across the Arab world must be defined not by the iron fist of a dictator or the hate of extremists, but by the hopes and aspirations of ordinary people who are reaching for the same rights that we celebrate here today. (Cheers, applause.)\nSo now we have a choice. My opponent and his running mate are new to foreign policy. (Laughter, applause.)\nBut from all that we've seen and heard, they want to take us back to an era of blustering and blundering that cost America so dearly.\nAfter all, you don't call Russia our number one enemy â€” not al- Qaida, Russia â€” (laughter) â€” unless you're still stuck in a Cold War mind warp. (Cheers, applause.)\nYou might not be ready for diplomacy with Beijing if you can't visit the Olympics without insulting our closest ally.\n(Laughter, cheers, applause.)\nMy opponent â€” my opponent said that it was tragic to end the war in Iraq. And he won't tell us how he'll end the war in Afghanistan. Well, I have, and I will. (Cheers, applause.) And while my opponent would spend more money on military hardware that our Joint Chiefs don't even want, I will use the money we're no longer spending on war to pay down our debt and put more people back to work â€” (extended cheers, applause) â€” rebuilding roads and bridges and schools and runways, because after two wars that have cost us thousands of lives and over a trillion dollars, it's time to do some nation building right here at home. (Cheers, applause.)\nYou can choose a future where we reduce our deficit without sticking it to the middle class. (Cheers, applause.) Independent experts say that my plan would cut our deficit by $4 trillion. (Cheers.) And last summer I worked with Republicans in Congress to cut a billion dollars in spending, because those of us who believe government can be a force for good should work harder than anyone to reform it so that it's leaner and more efficient and more responsive to the American people. (Cheers, applause.)\nI want to reform the tax code so that it's simple, fair and asks the wealthiest households to pay higher taxes on incomes over $250,000 â€” (cheers, applause) â€” the same rate we had when Bill Clinton was president, the same rate we had when our economy created nearly 23 million new jobs, the biggest surplus in history and a whole lot of millionaires to boot.\n(Applause.)\nNow, I'm still eager to reach an agreement based on the principles of my bipartisan debt commission. No party has a monopoly on wisdom. No democracy works without compromise. I want to get this done, and we can get it done.\nBut when Governor Romney and his friends in Congress tell us we can somehow lower our deficits by spending trillions more on new tax breaks for the wealthy, well â€” (boos) â€” what'd Bill Clinton call it? You do the arithmetic. (Laughter, cheers, applause.) You do the math.\nI refuse to go along with that, and as long as I'm president, I never will. (Cheers, applause.) I refuse to ask middle-class families to give up their deductions for owning a home or raising their kids just to pay for another millionaire's tax cut. (Cheers, applause.) I refuse to ask students to pay more for college or kick children out of Head Start programs to eliminate health insurance for millions of Americans who are poor and elderly or disabled all so those with the most can pay less. I'm not going along with that. (Continued cheers, applause.)\nAnd I will never â€” I will never turn Medicare into a voucher. (Cheers, applause.) No American should ever have to spend their golden years at the mercy of insurance companies. They should retire with the care and the dignity that they have earned. Yes, we will reform and strengthen Medicare for the long haul, but we'll do it by reducing the cost of health care, not by asking seniors to pay thousands of dollars more.\n(Cheers, applause.) And we will keep the promise of Social Security by taking the responsible steps to strengthen it, not by turning it over to Wall Street. (Cheers, applause.)\nThis is the choice we now face. This is what the election comes down to. Over and over, we've been told by our opponents that bigger tax cuts and fewer regulations are the only way, that since government can't do everything, it should do almost nothing. If you can't afford health insurance, hope that you don't get sick. (Murmurs of disapproval.) If a company releases toxic pollution into the air your children breathe, well, that's the price of progress. If you can't afford to start a business or go to college, take my opponent's advice and borrow money from your parents. (Laughter, mixed cheers and boos, applause.)\nYou know what, that's not who we are. That's not what this country is about. As Americans, we believe we are endowed by our Creator with certain inalienable rights, rights that no man or government can take away. We insist on personal responsibility, and we celebrate individual initiative. We're not entitled to success. We have to earn it. We honor the strivers, the dreamers, the risk- takers, the entrepreneurs who have always been the driving force behind our free enterprise system, the greatest engine of growth and prosperity that the world's ever known.\nBut we also believe in something called citizenship â€” (cheers, applause) â€” citizenship, a word at the very heart of our founding, a word at the very essence of our democracy, the idea that this country only works when we accept certain obligations to one another and to future generations.\nWe believe that when a CEO pays his autoworkers enough to buy the cars that they build, the whole company does better. (Cheers, applause.)\nWe believe that when a family can no longer be tricked into signing a mortgage they can't afford, that family's protected, but so is the value of other people's homes â€” (cheers, applause) â€” and so is the entire economy. (Applause.)\nWe believe the little girl who's offered an escape from poverty by a great teacher or a grant for college could become the next Steve Jobs or the scientist who cures cancer or the president of the United States â€” (cheers, applause) â€” and it is in our power to give her that chance. (Cheers, applause.)\nWe know that churches and charities can often make more of a difference than a poverty program alone. We don't want handouts for people who refuse to help themselves, and we certainly don't want bailouts for banks that break the rules. (Cheers, applause.)\nWe don't think the government can solve all of our problems, but we don't think the government is the source of all of our problems â€” (cheers, applause) â€” any more than our welfare recipients or corporations or unions or immigrants or gays or any other group we're told to blame for our troubles â€” (cheers, applause) â€” because â€” because America, we understand that this democracy is ours.\nWe, the people â€” (cheers) â€” recognize that we have responsibilities as well as rights; that our destinies are bound together; that a freedom which asks only, what's in it for me, a freedom without a commitment to others, a freedom without love or charity or duty or patriotism, is unworthy of our founding ideals, and those who died in their defense. (Cheers, applause.)\nAs citizens, we understand that America is not about what can be done for us. It's about what can be done by us, together â€” (cheers, applause) â€” through the hard and frustrating but necessary work of self-government. That's what we believe.\nSo you see, the election four years ago wasn't about me. It was about you. (Cheers, applause.) My fellow citizens â€” you were the change. (Cheers, applause.)\nYou're the reason there's a little girl with a heart disorder in Phoenix who'll get the surgery she needs because an insurance company can't limit her coverage. You did that. (Cheers, applause.)\nYou're the reason a young man in Colorado who never thought he'd be able to afford his dream of earning a medical degree is about to get that chance. You made that possible. (Cheers, applause.)\nYou're the reason a young immigrant who grew up here and went to school here and pledged allegiance to our flag will no longer be deported from the only country she's ever called home â€” (cheers, applause) â€” why selfless soldiers won't be kicked out of the military because of who they are or who they love, why thousands of families have finally been able to say to the loved ones who served us so bravely, welcome home. (Cheers, applause.) Welcome home. You did that. You did that. (Cheers, applause.) You did that.\nIf you turn away now â€” if you turn away now, if you buy into the cynicism that the change we fought for isn't possible, well, change will not happen. If you give up on the idea that your voice can make a difference, then other voices will fill the void, the lobbyists and special interests, the people with the $10 million checks who are trying to buy this election and those who are trying to make it harder for you to vote, Washington politicians who want to decide who you can marry or control health care choices that women should be making for themselves. (Cheers, applause.) Only you can make sure that doesn't happen. Only you have the power to move us forward.\nYou know, I recognize that times have changed since I first spoke to this convention. Times have changed, and so have I. I'm no longer just a candidate. I'm the president. (Cheers, applause.)\nAnd â€” (applause) â€” and that's â€”\nAUDIENCE MEMBERS: Four more years! Four more years!\nBARACK OBAMA: And that â€” and that means I know what it means to send young Americans into battle, for I've held in my arms the mothers and fathers of those who didn't return.\nI've shared the pain of families who've lost their homes, and the frustration of workers who've lost their jobs. If the critics are right that I've made all my decisions based on polls, then I must not be very good at reading them. (Laughter.)\nAnd while I'm proud of what we've achieved together â€” (cheers) â€” I'm far more mindful of my own failings, knowing exactly what Lincoln meant when he said, \"I have been driven to my knees many times by the overwhelming conviction that I had no place else to go.\" , for I have held in my arms the mothers and fathers of those who didn't return. I've shared the pain of families who've lost their homes, and the frustration of workers who've lost their jobs. If the critics are right that I've made all my decisions based on polls, then I must not be very good at reading them. And while I'm proud of what we've achieved together, I'm far more mindful of my own failings, knowing exactly what Lincoln meant when he said, \"I have been driven to my knees many times by the overwhelming conviction that I had no place else to go.\" (Cheers, applause.)\nBut as I stand here tonight, I have never been more hopeful about America. (Cheers, applause.) Not because I think I have all the answers. Not because I'm naive about the magnitude of our challenges.\nI'm hopeful because of you.\nThe young woman I met at a science fair who won national recognition for her biology research while living with her family at a homeless shelter â€” she gives me hope. (Cheers, applause.)\nThe auto worker who won the lottery after his plant almost closed, but kept coming to work every day, and bought flags for his whole town and one of the cars that he built to surprise his wife â€” he gives me hope.\n(Cheers, applause.)\nThe family business in Warroad, Minnesota, that didn't lay off a single one of their 4,000 employees when the recession hit â€” (cheers, applause) â€” even when their competitors shut down dozens of plants, even when it meant the owner gave up some perks and some pay because they understood that their biggest asset was the community and the workers who had helped build that business â€” they give me hope. (Cheers, applause.)\nI think about the young sailor I met at Walter Reed Hospital still recovering from a grenade attack that would cause him to have his leg amputated above the knee. And six months ago we would watch him walk into a White House dinner honoring those who served in Iran (sic; Iraq) â€” tall and 20 pounds heavier, dashing in his uniform, with a big grin on his face, sturdy on his new leg. And I remember how a few months after that I would watch him on a bicycle, racing with his fellow wounded warriors on a sparkling spring day, inspiring other heroes who had just begun the hard path he had traveled. He gives me hope. (Cheers, applause.) He gives me hope.\nI don't know what party these men and women belong to. I don't know if they'll vote for me. But I know that their spirit defines us. They remind me, in the words of Scripture, that ours is a future filled with hope. (Cheers.) And if you share that faith with me, if you share that hope with me, I ask you tonight for your vote.\n(Cheers, applause.)\nIf you reject the notion that this nation's promise is reserved for the few, your voice must be heard in this election. (Cheers, applause.)\nIf you reject the notion that our government is forever beholden to the highest bidder, you need to stand up in this election. (Cheers, applause.)\nIf you believe that new plants and factories can dot our landscape, that new energy can power our future, that new schools can provide ladders of opportunity to this nation of dreamers, if you believe in a country where everyone gets a fair shot, and everyone does their fair share and everyone plays by the same rules, then I need you to vote this November. (Cheers, applause.)\nAmerica, I never said this journey would be easy, and I won't promise that now. Yes, our path is harder, but it leads to a better place. (Cheers.) Yes, our road is longer, but we travel it together. (Cheers.)\nWe don't turn back. We leave no one behind. (Cheers.) We pull each other up. (Cheers, applause.) We draw strength from our victories. (Cheers, applause.) And we learn from our mistakes. But we keep our eyes fixed on that distant horizon knowing that providence is with us and that we are surely blessed to be citizens of the greatest nation on earth.\nThank you, God bless you and God bless these United States. (Cheers, applause.)",
    "(Cheers, applause.)\nDEBBIE WASSERMAN SCHULTZ: Thank you so much. (Cheers, applause.) Thank you. (Cheers, applause.) The 46th quadrennial national convention of the Democratic Party will now come to order. (Sounds gavel.)\n(Cheers, applause.) Welcome. Welcome, delegates, alternates, standing committee members, special guests, friends, members of the news media, guests from around the world and fellow Americans, to our deliberations.\nOver the next three days we will hold the most open and accessible political convention in history. (Cheers, applause.) Thank you. Viewers from across the country and around the world can watch the entire convention, gavel to gavel, live streamed on the Democratic convention's website and through our mobile app. In addition, the entire program is also being streamed simultaneously in Spanish. (Cheers, applause.)\nDuring our national convention, we will clearly demonstrate why we need to keep Barack Obama and Joe Biden in the White House. (Cheers, applause.) But this convention is about more than renominating President Obama. It's about Americans coming together to build one economy, not from the top down but from the middle class out and the bottom up.\n(Cheers, applause.) This convention's success will be based on engaging the American spirit and involving people who want to put their shoulders to the wheel and change our country for the better. (Cheers, applause.)\nWe have â€” we're so proud that we have the largest number of delegates ever assembled at a Democratic National Convention. (Cheers, applause.) And as I look out â€” as I look out from this podium, I see a diverse assembly of Democrats who represent the strength and unity of our party. (Cheers, applause.)\nThe Democratic Party is the oldest continuing party in the world, and your participation in this convention is a testament to the fact that we are also the most vibrant, inclusive and energized political party, aren't we? (Cheers, applause.)\nSo now for some housekeeping. At this time let me remind delegates that presidential nominating petitions must be submitted to the Office of the Secretary no later than 6:00 p.m. today. Vice presidential nominating petitions must be submitted to the Office of the Secretary no later than 9:00 a.m. Wednesday. Petitions should be delivered to the secretary's office, which is located on the floor level concourse.\nDelegates, alternates and guests, please give a round of applause for the DJ for the convention, DJ Cassidy. (Cheers, applause.) Let's also express our appreciation to the dedicated men and women who have worked tirelessly to get the arena and the stadium ready for our convention. (Cheers, applause.)\nAnd now I am pleased to introduce His Eminence Metropolitan Nicholas of Detroit to lead the invocation. (Applause.)"
  ]},
  {name: "republican", speeches: [
    "(Extended cheers, applause.)\nMITT ROMNEY: Thank you. (Cheers, applause.) Mr. Chairman â€” Mr. Chairman and delegates â€” (cheers, applause) â€” Mr. Chairman and delegates, I accept your nomination for president of the United States. (Cheers, applause.)\nAUDIENCE MEMBERS: Mitt! Mitt! Mitt! Mitt! Mitt! Mitt!\nMITT ROMNEY: I do so with humility, deeply moved by the trust you've placed in me. It's a great honor. It's an even greater responsibility. And tonight I'm asking you to join me to walk together to a better future.\nAnd by my side, I've chosen a man with a big heart from a small town. (Cheers, applause.) He represents the best of America, a man who will always make us very proud â€” my friend and America's next vice president, Paul Ryan. (Cheers, applause.)\nIn the days ahead, you're going to get to know Paul and Janna better. But last night America got to see what I saw in Paul Ryan â€” a strong and caring leader who's down to earth and confident in the challenge this moment demands, and I love the way he lights up around his kids, and how he's not embarrassed to show the world how much he loves his mom.\n(Cheers, applause.) But Paul, I still like the playlist on my iPod better than yours. (Laughter, applause.)\nFour years ago I know that many Americans felt a fresh excitement about the possibilities of a new president. That choice was not the choice of our party, but Americans always come together after elections. We're a good and generous people, and we're united by so much more than what divides us. When that election was over, when the yard signs came down and the television commercials finally came off the air, Americans were eager to go back to work, to live our lives the way Americans always have, optimistic and positive and confident in the future.\nThat very optimism is uniquely American. It's what brought us to America. We're a nation of immigrants. We're the children and grandchildren and great-grandchildren of the ones who wanted a better life, the driven ones, the ones who woke up at night hearing that voice telling them that life in the place called America could be better. They came not just in pursuit of the riches of this world, but for the richness of this life, freedom, freedom of religion â€” (applause) â€” freedom to speak their mind â€” (applause) â€” freedom to build a life and yes, freedom to build a business with their own hands. (Cheers, applause.)\nThis is the essence of the American experience. We Americans have always felt a special kinship with the future.\nWhen every new wave of immigrants looked up and saw the Statue of Liberty or knelt down and kissed the shores of freedom just 90 miles from Castro's tyranny, these new Americans surely had many questions. But none doubted that here in America, they could build a better life, that in America, their children would be blessed more than they.\nBut today, four years from the excitement of that last election, for the first time, the majority of Americans now doubt that our children will have a better future. It's not what we were promised. Every family in America wanted this to be a time when they could get a little ahead, put aside a little more for college, do more for the elderly mom that's now living alone or give a little more to their church or their charity. Every small business wanted these to be their best years ever, when they could hire more, do more for those who had stuck with them through the hard times, open a new store or sponsor that Little League team. And every new college graduate thought they'd have a good job by now, a place of their own, they could start paying back some of their loans and build for the future.\nThis is when our nation was supposed to start paying down the national debt and rolling back those massive deficits. This was the hope and change America voted for. It's not just what we wanted. It's not just what we expected. It's what Americans deserve. (Cheers, applause.)\nAUDIENCE MEMBERS: (Chanting.) USA! USA! USA!\nMITT ROMNEY: You deserved it because during these years you worked harder than ever before. You deserved it because when it cost more to fill up your car, you could out â€” cut out movie nights and put in longer hours. Or when you lost that job that paid 22.50 (dollars) an hour with benefits, you took two jobs at 9 bucks an hour. (Cheers, applause.)\nAUDIENCE MEMBERS: (Chanting.) USA! USA! USA! USA! USA! USA! Mitt! Mitt! Mitt! Mitt! Mitt! Mitt!\nMITT ROMNEY: You deserve it because your family depended on you, and you did it because you're an American, and you don't quit. You did it because it was what you had to do. But driving home late from that second job or standing there watching the gas pump hit $50 and still going, when the realtor told you that to sell your house, you'd have to take a big loss, in those moments you knew that this just wasn't right.\nBut what could you do except work harder, do with less, try to stay optimistic, hug your kids a little longer, maybe spend a little more time praying that tomorrow would be a better day?\nI wish President Obama had succeeded because I want America to succeed. (Cheers, applause.) But his promises gave way to disappointment and division.\nThis isn't something we have to accept. Now is the moment when we can do something. And with your help, we will do something. (Cheers, applause.)\nNow is the moment when we can stand up and say, I'm an American, I make my destiny, we deserve better, my children deserve better, my family deserves better, my country deserves better. (Cheers, applause.)\nSo here we stand. Americans have a choice, a decision. To make that choice, you need to know more about me and where I'd lead our country.\nI was born in the middle of the century in the middle of the country, a classic baby boomer. It was a time when Americans were returning from war and eager to work. To be an American was to assume that all things were possible. When President Kennedy challenged Americans to go to the moon, the question wasn't whether we'd get there, it was only when we'd get there. (Cheers, applause.) The soles of Neil Armstrong's boots on the moon made permanent impressions on our souls. Ann and I watched those steps together on her parents' sofa. Like all Americans, we went to bed that night knowing we lived in the greatest country in the history of the world. (Cheers, applause.)\nAUDIENCE MEMBERS: USA! USA! USA! USA! USA! USA! USA! USA!\nMITT ROMNEY: God bless Neil Armstrong. (Cheers, applause.)\nTonight that American flag is still there on the moon, and I don't doubt for a second that Neil Armstrong's spirit is still with us, that unique blend of optimism, humility and the utter confidence that when the world needs someone to do the really big stuff, you need an American. (Cheers, applause.)\nMy dad had been born in Mexico, and his family had to leave during the Mexican Revolution. I grew up with stories of his family being fed by the U.S. government as war refugees. My dad never made it through college, and he apprenticed as a lath and plaster carpenter.\nHe had big dreams. He convinced my mom, a beautiful young actress, to give up Hollywood to marry him and move to Detroit. He led a great â€” (cheers, applause) â€” he led a great automobile company and became governor of the great state of Michigan. (Cheers, applause.)\nWe were â€” we were Mormons, and growing up in Michigan, that might have seemed unusual or out of place, but I really don't remember it that way. My friends cared more about what sports teams we followed than what church we went to.\nMy mom and dad gave their kids the â€” the greatest gift of all â€” the gift of unconditional love. They cared deeply about who we would be and much less about what we would do. Unconditional love is a gift that Ann and I have tried to pass on to our sons and now to our grandchildren. All the laws and legislation in the world will never heal this world like the loving hearts and arms of mothers and fathers. (Cheers, applause.) You know, if every children could drift asleep feeling wrapped in the love of their family, and God's love, this world would be a far more gentle and better place.\n(Cheers, applause.)\nMy mom and dad were married for 64 years. And if you wondered what their secret was, you could have asked the local florist â€” (laughter) â€” because every day Dad gave Mom a rose, which he put on her bedside table. That's how she found out what happened on the day my father died. She went looking for him because that morning there was no rose.\nMy mom and dad were true partners, a life lesson that shaped my by everyday example. When my mom ran for the Senate, my dad was there for her every step of the way. I can still see her saying, in her beautiful voice, why should women have any less say than men about the great decisions facing our nation? (Cheers, applause.)\nDon't you wish she could have been here at this convention â€” (cheers) â€” and heard leaders like Governor Mary Fallin, Governor Nikki Haley, Governor Susana Martinez, Senator Kelly Ayotte and Secretary of State Condoleezza Rice? (Cheers, applause.) As governor of Massachusetts, I chose a woman lieutenant governor, a woman chief of staff. Half of my Cabinet and senior officials were women. And in business, I mentored and supported great women leaders who went on to run great companies.\nI grew up in Detroit in love with cars and wanted to be a car guy like my dad. But by the time I was out of school, I realized that I had to go out on my own, that if I stayed around in the same business, I'd never really know if I was getting a break because of my dad. I wanted to go someplace new and prove myself.\nThose weren't the easiest of days, many long hours and weekends working, five young sons who seemed to have this need to re-enact a different world war every night. (Laughter.) But if you asked Ann and I what we'd give to break up just one more fight between the boys or wake up in the morning and discover a pile of kids asleep in our room â€” well, every mom and dad knows the answer to that.\nThose days were the â€” (cheers, applause) â€” these were tough days, on Ann particularly. She was heroic through it all. Five boys, with our families a long way away. I had to travel a lot for my job then, and I'd call and try to offer support. But every mom knows that doesn't help get the homework done or get the kids out the door to school. And I knew that her job as a mom was harder than mine, and I knew without question that her job as a mom was a lot more important than mine. (Cheers, applause.)\nAnd as America saw Tuesday night, Ann would have succeeded at anything she wanted to do. (Cheers, applause.)\nLike a lot of families in a new place with no family, we â€” we found kinship with a wide circle of friends through our church. When we were new to the community, it was welcoming. And as the years went by, it was a joy to help others who had just moved into town or just joined our church.\nWe had remarkably vibrant and diverse congregations from all walks of life, and many who were new to America. We prayed together. Our kids played together. And we always stood ready to help each other out in different ways.\nThat's how it is in America. We look to our communities, our faiths, our families for our joy, our support in good times and bad. It's both how we live our lives and why we live our lives. The strength and power and goodness of America has always been based on the strength and power and goodness of our communities, our families and our faiths. (Cheers, applause.)\nThat's the bedrock of what makes America America. In our best days we can feel the vibrancy of America's communities, large and small. It's when we see that new business opening up downtown. It's when we go to work in the morning and see everybody else on the block doing the same thing. It's when our son or daughter calls from college to talk about which job they â€” offer they should take, and you try not to choke up when you hear that the one they like best is not too far from home. It's that good feeling when you have more time to volunteer to coach your kids' soccer team or help out on school trips.\nBut for too many Americans, those kind of good days are harder to come by. How many days have you woken up feeling that something really special was happening in America?\nMany of you felt that way on Election Day four years ago. Hope and change had a powerful appeal.\nBut tonight I'd ask a simple question.\nIf you felt that excitement when you voted for Barack Obama, shouldn't you feel that way now that he's President Obama? (Applause.) You know there's something wrong with the kind of job he's done as president when the best feeling you had was the day you voted for him. (Laughter, cheers, applause.)\nThe president hasn't disappointed you because he wanted to. The president has disappointed America because he hasn't led America in the right direction. He took office with â€” without the basic qualification that most Americans have, and one that was essential to the task at hand: He had almost no experience working in a business. Jobs, to him, are about government. (Cheers, applause.)\nI learned the real lessons about how America works from experience. When I was 37, I helped start a small company. My partners and I had been working for a company that was in the business of helping other businesses. So some of us had this idea that if we really believed our advice was helping companies, we should invest in companies; we should bet on ourselves and our â€” on our advice. So we started a new business called Bain Capital.\nThe only problem was, while â€” while we believed in ourselves, not many other people did. (Laughter.) We were young and had never done this before, and we almost didn't get off the ground. In those days, sometimes I wondered if I had made a really big mistake.\nBy the way, I'd thought about asking my church's pension fund to invest, but I didn't. (Laughter.) I figured it was bad enough that I might lose my investors' money, but I didn't want to go to hell, too.\n(Laughter, applause.) Shows what I know. Another of my partners got the Episcopal Church Pension Fund to invest â€” (laughter) â€” and today there are a lot of happy retired priests who should thank him. (Laughter, applause.)\nThat business we started with 10 people has now grown into a great American success story. Some of the companies we helped start are names you â€” you know and you've heard from tonight: an office company called Staples, where I'm pleased to see the Obama campaign's been shopping â€” (laughter, applause) â€” the Sports Authority, which of course became a favorite of my boys; we helped start an early childhood learning company called Bright Horizons that First Lady Michelle Obama rightly praised; and at a time when nobody thought we'd ever see a new steel mill built in America, we took a chance and built one in a cornfield in Indiana, that today â€” (cheers, applause) â€” today Steel Dynamics is one of the largest steel producers in the United States.\nThese â€” (applause) â€” these are American success stories. (Applause.) And yet the centerpiece of the president's entire re- election campaign is attacking success. Is it any wonder that someone who attacks success has led the worst economic recovery since the Great Depression? (Cheers, applause.) In America, we celebrate success; we don't apologize for success. (Cheers, applause.)\nNow â€” now, we weren't always successful at Bain, but no one ever is in the real world of business. That's what this president doesn't seem to understand. Business and growing jobs is about taking risk, sometimes failing, sometimes succeeding, but always striving. It's about dreams. Usually, it doesn't work out exactly as you might have imagined. Steve Jobs was fired at Apple, and then he came back and changed the world.\nIt's the genius of the American free enterprise system to harness the extraordinary creativity and talent and industry of the American people with a system that's dedicated to creating tomorrow's prosperity, not trying to redistribute today's. (Extended cheers, applause.)\nThat's why â€” that's why every president since the Great Depression who came before the American people asking for a second term could look back at the last four years and say with satisfaction: You're better off than you were four years ago. Except Jimmy Carter. (Laughter.) And except this president. (Cheers, applause.)\nThis president can ask us to be patient. This president can tell us it was someone else's fault. This president can tell us that the next four years he'll get it right. But this president cannot tell us that you're better off today than when he took office.\n(Cheers, applause.)\nAmerica's been patient. Americans have supported this president in good faith. But today the time has come to turn the page. Today the time has come for us to put the disappointments of the last four years behind us, to put aside the divisiveness and the recriminations, to forget about what might have been and to look ahead to what can be. Now is a time to restore the promise of America. (Cheers, applause.)\nMany Americans have given up on this president, but they haven't ever thought about giving up, not on themselves, not on each other and not on America. What is needed in our country today is not complicated or profound. Doesn't take a special government commission to tell us what America needs. What America needs is jobs, lots of jobs. (Cheers, applause.)\nIn the richest country in the history of the world, this Obama economy has crushed the middle class. Family income has fallen by $4,000, but health insurance premiums are higher. Food prices are higher. Utility bills are higher. And gasoline prices, they've doubled. Today more Americans wake up in poverty than ever before. Nearly 1-out-of-6 Americans is living in poverty. Look around you. These aren't strangers. These are our brothers and sisters, our fellow Americans. His policies have not helped create jobs. They've depressed them.\nAnd this I can tell you about where President Obama would take America.\nHis plan to raise taxes on small business won't add jobs: It would eliminate them. (Cheers, applause.) His assault on coal and gas and oil will send energy and manufacturing jobs to China. (Mixed boos, cheers, applause.) His trillion-dollar cuts to our military will eliminate hundreds of thousands of jobs and also put our security at greater risk. (Boos.) His $716 billion cut to Medicare to finance \"Obamacare\" will both hurt today's seniors and oppress innovation and jobs in medicine. (Boos.) And his trillion-dollar deficits, they slow our economy, restrain employment and cause wages to stall.\nTo the majority of Americans who now believe that the future will not be better than the past, I can guarantee you this: If Barack Obama is re-elected, you'll be right. (Applause.)\nI'm running for president to help create a better future â€” a future where everyone who wants a job can find a job â€” (cheers, applause) â€” where no senior feels for the â€” fears for the security of their retirement, an America where every parent knows that their child will get an education that leads them to a good job and a bright horizon.\nAnd unlike the president, I have a plan to create 12 million new jobs. (Cheers, applause.) Paul Ryan and I have five steps. First, by 2020, North America will be energy-independent by taking full advantage of our oil, our coal, our gas, our nuclear and our renewables. (Cheers, applause.)\nSecond, we'll give our fellow citizens the skills they need for the jobs of today and the careers of tomorrow. When it comes to the school your child will attend, every parent should have a choice and every child should have a chance. (Cheers, applause.)\nThird, we'll make trade work for America by forging new trade agreements. And when nations cheat in trade, there will be unmistakable consequences. (Cheers, applause.)\nAnd fourth, to assure every entrepreneur and every job creator that their investments in America will not vanish as have those in Greece, we will cut the deficit and put America on track to a balanced budget. (Cheers, applause.)\nAnd fifth, we will champion small businesses, America's engine of job growth. That means reducing taxes on business, not raising them. It means simplifying and modernizing the regulations that hurt small business the most. (Cheers, applause.) And it means that we must rein in the skyrocketing cost of health care by repealing and replacing \"Obamacare.\" (Cheers, applause.)\nToday women are more likely than men to start a business. They need a president who respects and understands what they do.\nAnd let me make this very clear: unlike President Obama, I will not raise taxes on the middle class of America. (Cheers, applause.)\nAs president, I'll protect the sanctity of life. I'll honor the institution of marriage. (Cheers, applause.) And I will guarantee America's first liberty, the freedom of religion. (Cheers, applause.)\nPresident Obama promised to begin to slow the rise of the oceans â€” (laughter) â€” and to heal the planet. My promise is to help you and your family. (Cheers, applause.)\nI will begin my presidency with a jobs tour. President Obama began his presidency with an apology tour. America, he said, had dictated to other nations. No, Mr. President, America has freed other nations from dictators. (Cheers, applause.)\nAUDIENCE MEMBERS: (Chanting.) We want Mitt! We want Mitt! We want Mitt! We want Mitt!\nMITT ROMNEY: Every American â€”\nAUDIENCE MEMBERS: (Chanting.) We want Mitt! We want Mitt! We want Mitt! We want Mitt!\nMITT ROMNEY: Every American was relieved the day President Obama gave the order and Seal Team 6 took out Osama bin Laden. (Cheers, applause.)\nOn another front, every American is less secure today because he has failed to slow Iran's nuclear threat. In his first TV interview as president, he said we should talk to Iran. We're still talking, and Iran's centrifuges are still spinning.\nPresident Obama has thrown allies like Israel under the bus â€” (boos) â€” even has he as relaxed sanctions on Castro's Cuba. He abandoned our friends in Poland by walking away from our missile defense commitments. (Boos.) But he's eager to give Russia's president, Putin, the flexibility he desires after the election. (Boos.) Under my administration, our friends will see more loyalty, and Mr. Putin will see a little less flexibility and more backbone. (Cheers, applause.)\nWe will honor America's democratic ideals, because a free world is a more peaceful world. This is the bipartisan foreign policy legacy of Truman and Reagan, and under my presidency, we will return to it once again. (Cheers, applause.)\nYou might have asked yourself if these last years are really the America we want â€”\nAUDIENCE MEMBERS: No!\nMITT ROMNEY: â€” the America that was won for us by \"the greatest generation.\"\nDoes the America we want borrow a trillion dollars from China?\nAUDIENCE MEMBERS: No!\nMITT ROMNEY: Does it fail to find the jobs that are needed for 23 million people and for half the kids graduating from college?\nAUDIENCE MEMBERS: No!\nMITT ROMNEY: Are those schools lagging behind the rest of the developed world?\nAUDIENCE MEMBERS: No!\nMITT ROMNEY: And does America that we want succumb to resentment and division among Americans?\nAUDIENCE MEMBERS: No!\nMITT ROMNEY: The America we all know has been a story of the many becoming one, uniting to preserve liberty, uniting to build the greatest economy in the world, uniting to save the world from unspeakable darkness. Everywhere I go in America, there are monuments that list those who have given their lives for America. There's no mention of their race, their party affiliation or what they did for a living. (Cheers, applause.) They lived and died under a single flag, fighting for a single purpose.\nThey pledged allegiance to the United States of America. That America, that united America, can unleash an economy that will put Americans back to work, that will once again lead the world with innovation and productivity and that will restore every father and mother's confidence that their children's future is brighter even than the past.\nThat America, that united America, will preserve a military that's so strong no nation would ever dare to test it. (Cheers, applause.)\nThat America â€” that America, that united America, will uphold the constellation of rights that were endowed by our creator and codified in our Constitution. (Cheers, applause.)\nThat united America will care for the poor and the sick, will honor and respect the elderly and will give a helping hand to those in need.\nThat America is the best within each of us. That America we want for our children. If I'm elected president of these United States, I will work with all my energy and soul to restore that America, to lift our eyes to a better future. That future is our destiny. That future is out there. It is waiting for us. Our children deserve it. Our nation depends on it. The peace and freedom of the world require it, and with your help, we will deliver it. (Cheers, applause.) Let us begin that future for America tonight. (Cheers, applause.)\nThank you so very much. May God bless you, may God bless the American people and may God bless the United States of America. (Cheers, applause.)",
    "(Cheers, applause.)\nMIA LOVE: I am thrilled to add Utah's voice in support for Mitt Romney. (Cheers, applause.)\nAUDIENCE MEMBER: We love Mia!\nMIA LOVE: Let me tell you about the America I know.\nMy parents immigrated to this country with $10 in their pockets and a hope that the America they heard about really did exist. When tough times came, they didn't look to Washington; they looked within. So the America I grew up knowing was centered in self-reliance and filled with the possibilities of living the American Dream. (Cheers, applause.)\nThe America I know is grounded in the determination found in patriots and pioneers, in small businesses with big ideas. It's found in the farmers who work in the beauty of our landscape and our heroic military.\nIt's found in the Olympic athletes and every child who looks at the seemingly impossible and says, I can do that. That's the America I know. (Cheers, applause.)\nPresident Obama's version of America is a divided one, often pitting us against each other based on income level, gender and social status. His policies have failed us. We're not better off than we were four years ago, and no rhetoric, bumper sticker or Hollywood campaign ad can change that. (Cheers, applause.)\nMr. President, I'm here to tell you the American people are awake, and we're not buying what you're selling in 2012. (Cheers, applause.) The American dream isn't just my story. It isn't just your story. It's our story.\nAUDIENCE MEMBER: That's right.\nMIA LOVE: It's a story of human struggle, standing up and striving for more. Our story has been told for over 200 years, with small steps and giant leaps, from a woman on a bus to a man with a dream, from the bravery of the greatest generation to the innovators and entrepreneurs of today, this is our story. This is our America. This is the America we know, because we built it. (Cheers, applause.)\nAUDIENCE MEMBERS: USA! USA! USA! USA! USA! USA! USA! USA! USA!\nMIA LOVE: (Laughs.) Thank you. Yes, we did.\nAUDIENCE MEMBERS: USA! USA! USA! USA! USA! USA! USA! (Cheers.)\nMIA LOVE: With â€”Â thank you. With Paul Ryan â€”Â with Mitt Romney as president and Paul Ryan as vice president, we can restore and revive that America â€”Â that American story we know and love. The world will know it, our children will tell it, and our grandchildren will possess it for years to come.\nGod bless America! (Cheers.) This is our time! We are truly the best and last hope on earth! (Cheers.) Thank you! (Cheers, applause.)"
  ]}
].map(party);

data.topics = [
  {name: "American dream", re: /\b(American dream)\b/gi, x: 558, y: 181},
  {name: "Better", re: /\b(Better)\b/gi, x: 618, y: 201},
  {name: "Women", re: /\b(wom[ae]n)\b/gi, x: 308, y: 323, arrow: "women"},
  {name: "Workers", re: /\b(workers?)\b/gi, x: 179, y: 206}
].map(topic);

data.topic = function(name) {
  var t = topic({name: name, re: new RegExp("\\b(" + d3.requote(name) + ")\\b", "gi")}, data.topics.length);
  data.topics.push(t);
  return t;
};

function party(party) {
  party.speeches = party.speeches.map(speech);
  party.sections = sections(party.speeches);
  party.wordCount = d3.sum(party.sections, function(d) { return countWords(d.speech.text.substring(d.i, d.j)); });
  return party;
}

function speech(text, i) {
  return {text: text, id: i};
}

function sections(speeches) {
  var speakerRe = /(?:\n|^)([A-Z\.()\- ]+): /g,
      sections = [];

  speeches.forEach(function(speech) {
    var speakerName = "AUDIENCE",
        match,
        i = speakerRe.lastIndex = 0;
    while (match = speakerRe.exec(speech.text)) {
      if (match.index > i) sections.push({speaker: speakerName, speech: speech, i: i, j: match.index});
      speakerName = match[1];
      i = speakerRe.lastIndex;
    }
    sections.push({speaker: speakerName, speech: speech, i: i, j: speech.text.length});
  });

  return sections.filter(function(d) { return !/^AUDIENCE\b/.test(d.speaker); });
}

function topic(topic, i) {
  topic.id = i;
  topic.count = 0;
  topic.cx = topic.x;
  topic.cy = topic.y;

  topic.parties = data.parties.map(function(party) {
    var count = 0,
        mentions = [];

    party.sections.forEach(function(section) {
      var text = section.speech.text.substring(section.i, section.j), match;
      topic.re.lastIndex = 0;
      while (match = topic.re.exec(text)) {
        ++count;
        mentions.push({
          topic: topic,
          section: section,
          i: section.i + match.index,
          j: section.i + topic.re.lastIndex
        });
      }
    });

    topic.count += count = count / party.wordCount * 25e3;
    return {count: count, mentions: mentions};
  });

  return topic;
}

function countWords(text) {
  return text.split(/\s+/g)
      .filter(function(d) { return d !== "â€”"; })
      .length;
}

})();

(function() {

var width = 970,
    height = 540;

var collisionPadding = 4,
    clipPadding = 4,
    minRadius = 16, // minimum collision radius
    maxRadius = 65, // also determines collision search radius
    maxMentions = 100, // don't show full transcripts
    activeTopic; // currently-displayed topic

var formatShortCount = d3.format(",.0f"),
    formatLongCount = d3.format(".1f"),
    formatCount = function(d) { return (d < 10 ? formatLongCount : formatShortCount)(d); };

var r = d3.scale.sqrt()
    .domain([0, d3.max(data.topics, function(d) { return d.count; })])
    .range([0, maxRadius]);

var force = d3.layout.force()
    .charge(0)
    .size([width, height - 80])
    .on("tick", tick);

var node = d3.select(".g-nodes").selectAll(".g-node"),
    label = d3.select(".g-labels").selectAll(".g-label");

d3.select(".g-nodes").append("rect")
    .attr("class", "g-overlay")
    .attr("width", width)
    .attr("height", height)
    .on("click", clear);

d3.select(window)
    .on("hashchange", hashchange);

d3.select("#g-form")
    .on("submit", submit);

updateTopics(data.topics);
hashchange();

// Update the known topics.
function updateTopics(topics) {
  topics.forEach(function(d) {
    d.r = r(d.count);
    d.cr = Math.max(minRadius, d.r);
    d.k = fraction(d.parties[0].count, d.parties[1].count);
    if (isNaN(d.k)) d.k = .5;
    if (isNaN(d.x)) d.x = (1 - d.k) * width + Math.random();
    d.bias = .5 - Math.max(.1, Math.min(.9, d.k));
  });
  force.nodes(data.topics = topics).start();
  updateNodes();
  updateLabels();
  tick({alpha: 0}); // synchronous update
}

// Update the displayed nodes.
function updateNodes() {
  node = node.data(data.topics, function(d) { return d.name; });

  node.exit().remove();

  var nodeEnter = node.enter().append("a")
      .attr("class", "g-node")
      .attr("xlink:href", function(d) { return "#" + encodeURIComponent(d.name); })
      .call(force.drag);

  var democratEnter = nodeEnter.append("g")
      .attr("class", "g-democrat");

  democratEnter.append("clipPath")
      .attr("id", function(d) { return "g-clip-democrat-" + d.id; })
    .append("rect");

  democratEnter.append("circle");

  var republicanEnter = nodeEnter.append("g")
      .attr("class", "g-republican");

  republicanEnter.append("clipPath")
      .attr("id", function(d) { return "g-clip-republican-" + d.id; })
    .append("rect");

  republicanEnter.append("circle");

  nodeEnter.append("line")
      .attr("class", "g-split");

  node.selectAll("rect")
      .attr("y", function(d) { return -d.r - clipPadding; })
      .attr("height", function(d) { return 2 * d.r + 2 * clipPadding; });

  node.select(".g-democrat rect")
      .style("display", function(d) { return d.k > 0 ? null : "none" })
      .attr("x", function(d) { return -d.r - clipPadding; })
      .attr("width", function(d) { return 2 * d.r * d.k + clipPadding; });

  node.select(".g-republican rect")
      .style("display", function(d) { return d.k < 1 ? null : "none" })
      .attr("x", function(d) { return -d.r + 2 * d.r * d.k; })
      .attr("width", function(d) { return 2 * d.r; });

  node.select(".g-democrat circle")
      .attr("clip-path", function(d) { return d.k < 1 ? "url(#g-clip-democrat-" + d.id + ")" : null; });

  node.select(".g-republican circle")
      .attr("clip-path", function(d) { return d.k > 0 ? "url(#g-clip-republican-" + d.id + ")" : null; });

  node.select(".g-split")
      .attr("x1", function(d) { return -d.r + 2 * d.r * d.k; })
      .attr("y1", function(d) { return -Math.sqrt(d.r * d.r - Math.pow(-d.r + 2 * d.r * d.k, 2)); })
      .attr("x2", function(d) { return -d.r + 2 * d.r * d.k; })
      .attr("y2", function(d) { return Math.sqrt(d.r * d.r - Math.pow(-d.r + 2 * d.r * d.k, 2)); });

  node.selectAll("circle")
      .attr("r", function(d) { return r(d.count); });
}

// Update the displayed node labels.
function updateLabels() {
  label = label.data(data.topics, function(d) { return d.name; });

  label.exit().remove();

  var labelEnter = label.enter().append("a")
      .attr("class", "g-label")
      .attr("href", function(d) { return "#" + encodeURIComponent(d.name); })
      .call(force.drag);

  labelEnter.append("div")
      .attr("class", "g-name")
      .text(function(d) { return d.name; });

  labelEnter.append("div")
      .attr("class", "g-value");

  label
      .style("font-size", function(d) { return Math.max(8, d.r / 2) + "px"; })
      .style("width", function(d) { return d.r * 2.5 + "px"; });

  // Create a temporary span to compute the true text width.
  label.append("span")
      .text(function(d) { return d.name; })
      .each(function(d) { d.dx = Math.max(d.r * 2.5, this.getBoundingClientRect().width); })
      .remove();

  label
      .style("width", function(d) { return d.dx + "px"; })
    .select(".g-value")
      .text(function(d) { return formatShortCount(d.parties[0].count) + " - " + formatShortCount(d.parties[1].count); });

  // Compute the height of labels when wrapped.
  label.each(function(d) { d.dy = this.getBoundingClientRect().height; });
}

// Simulate forces and update node and label positions on tick.
function tick(e) {
  node
      .each(bias(e.alpha * 105))
      .each(collide(.5))
      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

  label
      .style("left", function(d) { return (d.x - d.dx / 2) + "px"; })
      .style("top", function(d) { return (d.y - d.dy / 2) + "px"; });
}

// A left-right bias causing topics to orient by party preference.
function bias(alpha) {
  return function(d) {
    d.x += d.bias * alpha;
  };
}

// Resolve collisions between nodes.
function collide(alpha) {
  var q = d3.geom.quadtree(data.topics);
  return function(d) {
    var r = d.cr + maxRadius + collisionPadding,
        nx1 = d.x - r,
        nx2 = d.x + r,
        ny1 = d.y - r,
        ny2 = d.y + r;
    q.visit(function(quad, x1, y1, x2, y2) {
      if (quad.point && (quad.point !== d) && d.other !== quad.point && d !== quad.point.other) {
        var x = d.x - quad.point.x,
            y = d.y - quad.point.y,
            l = Math.sqrt(x * x + y * y),
            r = d.cr + quad.point.r + collisionPadding;
        if (l < r) {
          l = (l - r) / l * alpha;
          d.x -= x *= l;
          d.y -= y *= l;
          quad.point.x += x;
          quad.point.y += y;
        }
      }
      return x1 > nx2 || x2 < nx1 || y1 > ny2 || y2 < ny1;
    });
  };
}

// Fisherâ€“Yates shuffle.
function shuffle(array) {
  var m = array.length, t, i;
  while (m) {
    i = Math.floor(Math.random() * m--);
    t = array[m];
    array[m] = array[i];
    array[i] = t;
  }
  return array;
}

// Given two quantities a and b, returns the fraction to split the circle a + b.
function fraction(a, b) {
  var k = a / (a + b);
  if (k > 0 && k < 1) {
    var t0, t1 = Math.pow(12 * k * Math.PI, 1 / 3);
    for (var i = 0; i < 10; ++i) { // Solve for theta numerically.
      t0 = t1;
      t1 = (Math.sin(t0) - t0 * Math.cos(t0) + 2 * k * Math.PI) / (1 - Math.cos(t0));
    }
    k = (1 - Math.cos(t1 / 2)) / 2;
  }
  return k;
}

// Update the active topic on hashchange, perhaps creating a new topic.
function hashchange() {
  var name = decodeURIComponent(location.hash.substring(1)).trim();
}

// Trigger a hashchange on submit.
function submit() {
  var name = this.search.value.trim();
  location.hash = name ? encodeURIComponent(name) : "!";
  this.search.value = "";
  d3.event.preventDefault();
}

// Clear the active topic when clicking on the chart background.
function clear() {
  location.replace("#!");
}

// Rather than flood the browser history, use location.replace.
function click(d) {
  location.replace("#" + encodeURIComponent(d === activeTopic ? "!" : d.name));
  d3.event.preventDefault();
}

// When hovering the label, highlight the associated node and vice versa.
// When no topic is active, also cross-highlight with any mentions in excerpts.
function mouseover(d) {
  node.classed("g-hover", function(p) { return p === d; });
  if (!activeTopic) d3.selectAll(".g-mention p").classed("g-hover", function(p) { return p.topic === d; });
}

// When hovering the label, highlight the associated node and vice versa.
// When no topic is active, also cross-highlight with any mentions in excerpts.
function mouseout(d) {
  node.classed("g-hover", false);
  if (!activeTopic) d3.selectAll(".g-mention p").classed("g-hover", false);
}

})();
